<html><head><link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../expandjs/expandjs.html">
<link rel="import" href="../iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../mat-icon-button/mat-icon-button.html">
<link rel="import" href="../mat-icons/mat-icons.html">
<link rel="import" href="../mat-input-behavior/mat-input-behavior.html">
<link rel="import" href="../mat-input-behavior/mat-input-styles.html">
<link rel="import" href="../mat-label/mat-label.html">
<link rel="import" href="../mat-typography/mat-typography.html">
<link rel="import" href="mat-editor-styles.html">

<script src="../codemirror/lib/codemirror.js"></script>
<script src="../codemirror/mode/css/css.js"></script>
<script src="../codemirror/mode/javascript/javascript.js"></script>
<script src="../codemirror/mode/xml/xml.js"></script>
<script src="../codemirror/mode/htmlmixed/htmlmixed.js"></script>

</head><body><dom-module id="mat-editor">

    <template strip-whitespace="">

        <style include="mat-input-styles"></style>
        <style include="mat-editor-styles"></style>

        <style>:host{box-sizing:border-box;display:block;height:100%;text-align:left;}:host([full-screen]){@apply (--layout-fit);height:auto !important;margin:0 !important;width:auto !important;z-index:1;}:host .label{margin:0;padding-bottom:8px;}:host([full-screen]) .label,
            :host([label=""]) .label,
            :host(:not([label])) .label{display:none !important;}:host .wrapper{box-sizing:border-box;height:100%;padding:0;position:relative;z-index:0;}:host([label]:not([label=""]):not([full-screen])) .wrapper{height:calc(100% - 40px);}:host .editor{@apply (--mat-font-body);box-sizing:border-box;cursor:text;height:100%;}:host .button{opacity:0.10;position:absolute;right:4px;top:0;z-index:2;}:host .button:hover{opacity:0.30;}:host(:not([expandable])) .button{display:none !important;}</style>

        <label is="mat-label" disabled="[[disabled]]" focused="[[focused]]">[[label]]</label>

        <div class="wrapper">
            <div class="editor"><content></content></div>
            <mat-icon-button class="button" active="{{fullScreen}}" active-icon="mat:fullscreen-exit" color="white" icon="mat:fullscreen" toggleable=""></mat-icon-button>
        </div>

    </template>

    <script>Polymer({is:"mat-editor",behaviors:[Polymer.MatInputBehavior],blur:function(){var e=this,t=e.input.getInputField();return t&&e.focused&&t.blur(),e},resize:function(){var e=this;return e.input?(e.editor.style.height=e.height&&e.height+"px"||"",e.input.setSize(null,!e.fullScreen&&e.height||"100%"),e.input.refresh(),e):e},_commitFrom:function(){var e=this;return e.value=e.input.getValue(),e},_commitTo:function(){var e=this;return e.value!==e.input.getValue()&&e.input.setValue(e.value||""),e},_inject:function(){var e=this,t=XP.assign(document.createElement("textarea"),{textContent:e.value}),n=XP.assign({},e.options,{autofocus:e.autoFocus,tabindex:e.tabIndex});return Polymer.dom(e).appendChild(t),Polymer.dom.flush(),e._setInput(CodeMirror.fromTextArea(t,n)),e.input.on("blur",e._blurHandler.bind(e)),e.input.on("change",e._changeHandler.bind(e)),e.input.on("focus",e._focusHandler.bind(e)),e},_update:function(){var e=this;return e.input.setOption("mode",e.mode),e.input.setOption("readOnly",e.readonly),XP.setAttribute(e.input.getTextArea(),"name",e.name),e},_validate:function(e){XP.assertArgument(XP.isVoid(e)||XP.isFalse(e)||XP.isString(e),1,"string");var t=this;return t._setInvalidMessage(XP.isDefined(e)?e||null:t.invalidMessage),t._setInvalid(!!t.invalidMessage),t},observers:["resize(fullScreen, height)","update(mode, readonly)"],options:{indentUnit:4,lineNumbers:!0,showCursorWhenSelecting:!0,tabSize:4,theme:"material",extraKeys:{Tab:function(e){e.replaceSelection(XP.repeat(" ",4))}}},properties:{editor:{notify:!0,readOnly:!0},expandable:{reflectToAttribute:!0,type:Boolean,value:!1},fullScreen:{reflectToAttribute:!0,type:Boolean,value:!1},height:{reflectToAttribute:!0,type:Number},mode:{type:String,value:"htmlmixed"},readonly:{reflectToAttribute:!0,type:Boolean,value:!1}},attached:function(){requestAnimationFrame(this.resize.bind(this))},ready:function(){this._setEditor(Polymer.dom(this.root).querySelector(".editor"))}});</script>

</dom-module>
</body></html>