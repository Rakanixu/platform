<html><head><link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../expandjs/expandjs.html">
<link rel="import" href="../xp-shared-behavior/xp-shared-behavior.html">

<script>Polymer({is:"xp-script",behaviors:[Polymer.XPSharedBehavior],inject:function(e){if("pending"===this.state)return this;var t=this,r=t.callback,s=t.src,i=t.promises.hasOwnProperty(s)&&!e,a=i?null:Polymer.dom(document.head),n=i?null:a.querySelector('script[src="'+s+'"]'),o=i?null:document.createElement("script"),d=i?t.promises[s]:new Promise(function(e){(r?window:o)[r||"onload"]=e});return t.promises[s]=d.then(function(e){return r&&delete window[r],t._setState("loaded"),t._setData(e),r&&t.share(r,e),t.fire("xp-script-load",{firer:t,data:e,src:s}),e}),i?t:(n&&a.removeChild(n),o.async=!0,o.src=s,a.appendChild(o),"loaded"!==t.state&&t._setState("pending"),t)},properties:{callback:{type:String},data:{notify:!0,readOnly:!0},loaded:{computed:"_computeLoaded(state)",notify:!0,reflectToAttribute:!0,type:Boolean,value:!1},src:{observer:"_srcChanged",type:String},state:{notify:!0,observer:"_stateChanged",readOnly:!0,reflectToAttribute:!0,type:String,value:"idle"}},promises:{},_computeLoaded:function(e){return"loaded"===e},_srcChanged:function(){this.src&&this.inject()},_stateChanged:function(){this.fire("xp-script-state",{firer:this,state:this.state})},created:function(){this.classList.add("script")}});</script>
</head><body></body></html>