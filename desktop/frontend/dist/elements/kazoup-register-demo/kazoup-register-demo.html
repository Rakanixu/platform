<dom-module id="kazoup-register-demo">
  <link rel="import" type="css" href="kazoup-register-demo.css">
  <template>
    <div class="container box vertical layout center-justified">
      <h2 class="horizontal layout center-justified">Demo</h2>

      <kazoup-form 
        id="registerDemo" 
        url="[[endpointList.userRegisterDemo]]"
        fields="{{setupFields}}" 
        method="POST" 
        is-authorize="{{false}}"
        keyboard-target="[[registerDemoElement]]"
        label="Login"></kazoup-form>
    </div>

    <iron-a11y-keys id="a11y" keys="enter"></iron-a11y-keys>
  </template>
  <script>
    'use strict';

    (function() {
      Polymer({
        is: 'kazoup-register-demo',
        behaviors: [
          KazoupBehaviors.APIUrls
        ],
        properties: {
          error: { 
            notify: true 
          },
          setupFields: {
            type: Array,
            value: function() {
              return [{
                  'attr': 'email',
                  'type': 'string',
                  'required': true,
                  'read_only': false,
                  'label': 'Email address',
                  'max_length': 256
                }];
            }
          },
          registerDemoElement: {
            type: Object,
            notify: false,
            value: function() {
              return this.$.registerDemo;
            }
          }
        },
        ready: function() {
          this.registerDemo = this.$.registerDemo;

          this.registerDemo.addEventListener('request-success', function(e) {
            // jshint unused:false
            Polymer.dom(document).querySelector('#paperToast').text =
              'Creating your demo. You\'ll receive an email shortly with your access link.';
            Polymer.dom(document).querySelector('#paperToast').show();
          });
        }
      });
    }());
  </script>
</dom-module>
