!function(){"use strict";var e=require("../assert/assertArgument"),r=require("../object/assign"),t=require("../collection/freeze"),i=require("../object/has"),n=require("../tester/isFunction"),u=require("../tester/isObject"),a=require("../tester/isString"),o=require("../function/mock"),l=require("../function/promise"),c=require("../collection/seal"),s=require("../error/ValidationError"),f=require("../object/value");module.exports=function(b,d,v){e(n(b)||u(b),1,"Function or Object"),e(a(d,!0),2,"string"),e(n(v)||u(v),3,"Function or Object"),v=n(v)?{value:v}:v,v.defined=!1,v.enumerable=f(v,"enumerable",!0);var q=v.value,m=n(v.get),g=n(v.set),j=n(v.validate),h=!m&&!g;return h&&v.promise&&(v.value=function(){return l(arguments,q,this)}),m&&!g&&(v.set=function(e){return e}),!g||m||j||(v.validate=o()),n(b)&&!v.static&&(b=b.prototype),Object.defineProperty(b,d,r({configurable:!0,enumerable:v.enumerable},h?{value:f(v,"value"),writable:f(v,"writable",!0)}:{get:m?v.get:function(){return f(this,d+"_")},set:m?v.set:function(e){var r=this,n=d+"_",u=r[n],a=v.set.call(r,e),o=v.validate.call(r,a);if(o)throw new s(d,o,500);(v.defined=v.defined||i(r,n))?r[n]=a:Object.defineProperty(r,n,{configurable:v.defined=!0,enumerable:v.enumerable,writable:!0,value:a}),v.sealed&&c(a),v.frozen&&t(a),v.then&&v.then.call(r,a,u)}})),h&&v.sealed&&c(b[d]),h&&v.frozen&&t(b[d]),b}}();