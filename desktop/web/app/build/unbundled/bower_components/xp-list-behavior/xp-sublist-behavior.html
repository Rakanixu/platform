<html><head><link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../expandjs/expandjs.html">
<link rel="import" href="../xp-collapse-behavior/xp-collapse-behavior.html">
<link rel="import" href="../xp-master-behavior/xp-master-behavior.html">
<link rel="import" href="../xp-slave-behavior/xp-slave-behavior.html">

<script>Polymer.XPSublistBehaviorImp={observers:["_listObserver(collapsed, collapsible, list)","_transitionObserver(collapsed, collapser, duration, easing)"],properties:{collapsible:{notify:!0,reflectToAttribute:!0,type:Boolean,value:!1},list:{notify:!0,readOnly:!0},sublists:{notify:!0,readOnly:!0,value:function(){return[]}},superlist:{notify:!0,observer:"_superlistObserver",readOnly:!0}},_collapsedObserver:function(){if(this.isAttached){var e=this,s=e.collapsed,l=e.duration,t=e.easing,r=XP.findNextElement(e,".sublist[collapsible]:not([collapsed])"),i=XP.findPreviousElement(e,".sublist[collapsible]:not([collapsed])"),a=XP.takeWhile(XP.findNextElements(e,":not([template])"),function(e){return!r||e.previousElementSibling!==r});e.collapser&&e.fire("xp-collapse",{firer:e,isCollapsed:s}),e.collapser&&!e.collapseDisabled&&(e._setCollapsing(!0),requestAnimationFrame(function(){var r=i?-Polymer.dom(i.root).querySelector(".collapsible").scrollHeight:0,o=-e.collapser.scrollHeight;XP.forEach(a,function(e){e.style.transition="transform 0s",e.style.transform="translateY("+(s?r:o)+"px)"}),e.collapser.style.transform="translateY("+(s?"-100":"0")+"%)",requestAnimationFrame(function(){XP.forEach(a,function(e){e.style.transition="transform "+l/1e3+"s "+t,e.style.transform="translateY("+(s?o:r)+"px)"}),e.debounce("collapsing",function(){e._setCollapsing(!1),XP.forEach(a,function(e){e.style.transition="transform 0s",e.style.transform="translateY(0)"})},l)})}))}},_listObserver:function(){var e=this;if(e.isAttached){if(!e.collapsible)return e.collapsed=!1;e.collapsed||e.list.autoCollapseDisabled||XP.invoke(XP.findSiblingElements(e,".sublist"),"collapse"),!e.collapsed&&e.superlist&&e.superlist.expand()}},_superlistObserver:function(){Polymer.XPSublistBehaviorImp.mutated.apply(this)},_transitionObserver:function(){var e=this;e.collapser.style.transition="transform "+e.duration/1e3+"s "+e.easing},created:function(){this.classList.add("sublist")},mutated:function(){var e=this;e.collapsedObserver&&e.collapsedObserver.disconnect(),e.superlist&&e.collapsible&&e.superlist.collapsed&&e.collapse(),e.superlist&&(e.collapsedObserver=XP.onMutation(e.superlist,Polymer.XPSublistBehaviorImp.mutated.bind(e),{attributes:!0,attributeFilter:["collapsed"]}))},ready:function(){var e=this;e.mastersMap.list=".list",e.mastersMap.superlist=".sublist",e.slavesMap.sublists=".sublist",e.collapser.style.transform="translateY("+(e.collapsed?"-100":"0")+"%)"}},Polymer.XPSublistBehavior=[Polymer.XPCollapseBehavior,Polymer.XPMasterBehavior,Polymer.XPSlaveBehavior,Polymer.XPSublistBehaviorImp];</script>
</head><body></body></html>