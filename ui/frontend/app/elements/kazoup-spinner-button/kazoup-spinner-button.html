<link rel="import" href="../../bower_components/paper-spinner/paper-spinner.html">

<dom-module id="kazoup-spinner-button">
  <link rel="import" type="css" href="kazoup-spinner-button.css">

  <template>

    <paper-button on-tap="submitForm" class="kazoup-paper-button horizontal layout" raised>
      <div class="flex"></div>
      <span three center-justified>[[label]]</span>
      <div class="flex"></div>
      <paper-spinner id="spinner"></paper-spinner>
    </paper-button>

  </template>
  <script>
    'use strict';

    (function() {
      Polymer({
        is: 'kazoup-spinner-button',
        properties: {
          label: {
            type: String,
            notify: true
          }
        },
        ready: function() {
          this.spinner = this.$.spinner;
        },
        submitForm: function() {
          var _self = this;
          this.set('spinner.active', true);
          this.fire('submitForm', {
            callback: function () {
              Polymer.dom(_self.spinner).removeAttribute('active');
              _self.spinner.active = false;
            }
          });
        }
      });
    }());
  </script>
</dom-module>
