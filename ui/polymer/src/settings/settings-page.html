<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/iron-icons/editor-icons.html">
<link rel="import" href="../../bower_components/iron-icons/image-icons.html">
<link rel="import" href="../../bower_components/iron-icons/av-icons.html">
<link rel="import" href="../../bower_components/iron-image/iron-image.html">
<link rel="import" href="../../bower_components/iron-list/iron-list.html">
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../../bower_components/iron-media-query/iron-media-query.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">

<link rel="import" href="../../bower_components/neon-animation/neon-animated-pages.html">

<link rel="import" href="../../bower_components/paper-drawer-panel/paper-drawer-panel.html">
<link rel="import" href="../../bower_components/paper-header-panel/paper-header-panel.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/paper-item/paper-icon-item.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">
<link rel="import" href="../../bower_components/paper-menu/paper-menu.html">
<link rel="import" href="../../bower_components/paper-tabs/paper-tabs.html">
<link rel="import" href="../../bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-toast/paper-toast.html">
<link rel="import" href="../../bower_components/paper-progress/paper-progress.html">

<link rel="import" href="../../bower_components/mat-list/mat-list.html">
<link rel="import" href="../../bower_components/mat-text-field/mat-text-field.html">
<link rel="import" href="../../bower_components/mat-icon/mat-icon.html">
<link rel="import" href="../../bower_components/mat-icons/mat-icons.html">
<link rel="import" href="../../bower_components/mat-dialog/mat-dialog.html">
<link rel="import" href="../../bower_components/mat-icons/image-icons.html">
<link rel="import" href="../../bower_components/mat-avatar/mat-avatar.html">
<link rel="import" href="../../bower_components/mat-button/mat-button.html">
<link rel="import" href="../../bower_components/mat-raised-button/mat-raised-button.html">
<link rel="import" href="../../bower_components/mat-icon-button/mat-icon-button.html">
<link rel="import" href="../../bower_components/mat-ripple/mat-ripple.html">
<link rel="import" href="../../bower_components/mat-item/mat-item.html">
<link rel="import" href="../../bower_components/mat-divider/mat-divider.html">
<link rel="import" href="../../bower_components/mat-breadcrumb/mat-breadcrumb.html">
<link rel="import" href="../../bower_components/mat-breadcrumb/mat-breadcrumb-step.html">
<link rel="import" href="../../bower_components/web-socket/web-socket.html">
<link rel="import" href="../../bower_components/mat-toast/mat-toast.html">
<link rel="import" href="../../bower_components/mat-typography/mat-typography.html">
<link rel="import" href="../../bower_components/mat-snackbar/mat-snackbar.html">
<link rel="import" href="../../bower_components/mat-ink/mat-ink.html">
<link rel="import" href="../../bower_components/mat-menu/mat-menu.html">

<link rel="import" href="../../src/behaviors/util-behavior.html">
<link rel="import" href="../../src/behaviors/map-behavior.html">

<link rel="import" href="../../src/datasources/datasources-page.html">

<dom-module id="settings-page">
  <template>
    <style include="iron-flex iron-flex-alignment"></style>
    <style include="shared-styles">
      :host {
        display: block;
      }

      paper-header-panel {
        -webkit-app-region: drag;
        --paper-header-panel-shadow: {
          height: 0;
        }
      }

      paper-header-panel[drawer] paper-toolbar {
        --paper-toolbar-background: var(--dark-primary);
      }

      paper-toolbar mat-text-field {
        margin-top: 16px;
      }

      paper-tabs {
        --paper-tabs-selection-bar-color: var(--accent);
      }
    </style>

    <paper-drawer-panel id="mainDrawerPanel"
                        responsive-width="99999px"
                        disable-swipe="true"
                        right-drawer main>
      <paper-header-panel id="mainPaperHeaderPanel" class="list-panel main" main>

        <!-- List Toolbar -->
        <paper-toolbar class="medium-tall">
          <paper-icon-button icon="menu"
                             on-tap="openMenu"
                             hidden$="[[mediaQueryLarge]]"></paper-icon-button>

          <div class="flex horizontal layout">
            <div class="title flex">Settings</div>
          </div>

          <paper-tabs class="middle horizontal layout fit" selected="{{selectedTab}}" scrollable>
            <paper-tab class="flex">DATA SOURCES</paper-tab>
          </paper-tabs>

          <paper-progress id="progressBar"
                          class="middle fit"
                          hidden$="[[!loading]]"
                          indeterminate></paper-progress>
        </paper-toolbar>

        <!-- Search results -->
        <div class="vertical layout center-justified" style="height:100%;">
          <neon-animated-pages id="neonPages"
                               selected="[[selectedTab]]">
            <neon-animatable>
              <datasources-page id="datasources" datasources-results="{{datasourceResults}}"></datasources-page>
            </neon-animatable>
          </neon-animated-pages>
        </div>

      </paper-header-panel>
    </paper-drawer-panel>

    <paper-toast id="toast" text=""></paper-toast>

    <iron-media-query query="(min-width: 1281px)"
                      query-matches="{{mediaQueryLarge}}"></iron-media-query>

  </template>

  <script>
    'use strict';

    (function() {
      Polymer({
        is: 'settings-page',
        behaviors: [
          Polymer.UtilBehaviorImp,
          Polymer.MapBehaviorImp
        ],
        properties: {
          loading: {
            type: Boolean,
            notify: true,
            value: false
          },
          selectedTab: {
            type: Object,
            notify: false,
            value: -1
          }
        },
        observers: [
          '_route(subroute.path)'
        ],
        _route: function(path) {
          if (path === this.pagesMap.settings.subpath) {
            this.set('selectedTab', 0);
          }
        }
      });
    }());
  </script>
</dom-module>
