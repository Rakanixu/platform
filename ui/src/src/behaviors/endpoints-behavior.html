<script>
  'use strict';

  (function() {
    var customHeaders;
    var userId;

    // window.Endpoints are defined on the electron index.js file (The one which is loaded in browser)
    Polymer.EndpointsBehaviorImp = {
      properties: {
        endpoints: {
          type: Object,
          notify: true,
          value: function () {
            return window.Endpoints
          }
        }
      },
      getToken: function() {
        return localStorage.getItem('token');
      },
      loadPage: function(selected, eventName, obj) {
        document.querySelector('#ironPages').selected = selected;
        this.fireEvent(eventName, obj);
      },
      checkUnauthorize: function() {
        // Unauthorize
        if (event.detail.request.xhr.response.code === 401) {
          localStorage.removeItem('token');
          localStorage.removeItem('id_token');
          this.loadPage(1, 'login-auth0-activated', {});
        }
      }
    };
  }());
</script>
