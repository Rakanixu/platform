<html><head><link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../expandjs/expandjs.html">

<script>Polymer.XPInputBehaviorImp={_commitFrom:XP.mock(),_commitIndex:XP.mock(),_commitTo:XP.mock(),_inject:XP.mock(),_sanitize:XP.mock(),_update:XP.mock(),_validate:XP.mock(),blur:function(){var e=this;return e.input&&e.input.blur&&e.input.blur(),e},findLabel:function(){var e=this,t=e.id&&Polymer.dom(e.domHost?e.domHost.root:document),i=e.id&&t.querySelector('label[for="'+e.id+'"]');return i||XP.findParentElement(e,"label")||null},focus:function(){var e=this;return e.input&&e.input.focus&&e.input.focus(),e},select:function(e){var t=this;return e&&t.reset(),t.focus(),t._select(),t},reset:function(){var e=this;return e.model=e.memento,e._setInvalid(!1),e._setInvalidMessage(null),e},sanitize:function(){var e=this;return e.input&&e._sanitize(),e.value},toggle:function(){var e=this;return"boolean"!==e.primitive||e.disabled||(e.checked=!e.checked),e},update:function(){var e=this;return e.input?(e._update(),e.sanitize(),!e.value&&e.required||e.validate(),e.fire("xp-input-update",{firer:e,name:e.name}),e):e},validate:function(){var e=this;return e._validate(),e.fire("xp-input-validation",{firer:e,name:e.name,model:e.model}),e},_select:function(){var e=this;return e.input&&e.input.select&&e.input.select(),e},_toModel:function(e){var t=this,i=XP.isPrimitive(e)?e:null;return"boolean"===t.primitive?XP.toBoolean(i):"number"===t.primitive?XP.toNumber(i):XP.toString(i)||null},_toValue:function(e){var t=this,i=XP.isPrimitive(e)?e:null;return"boolean"===t.primitive?XP.toBoolean(i,!0):XP.toString(i,!0)},listeners:{click:"_clickHandler"},observers:["update(disabled, form, input, name, type)"],properties:{autoFocus:{type:Boolean,value:!1},chars:{notify:!0,readOnly:!0,type:Number,value:0},checked:{notify:!0,observer:"_checkedObserver",reflectToAttribute:!0,type:Boolean},disabled:{notify:!0,observer:"_disabledObserver",reflectToAttribute:!0,type:Boolean,value:!1},empty:{notify:!0,readOnly:!0,reflectToAttribute:!0,type:Boolean,value:!0},error:{reflectToAttribute:!0,type:String,value:null},focused:{notify:!0,observer:"_focusedObserver",readOnly:!0,reflectToAttribute:!0,type:Boolean,value:!1},form:{notify:!0,observer:"_formObserver",readOnly:!0,value:null},hidden:{notify:!0,observer:"_hiddenObserver",reflectToAttribute:!0,type:Boolean,value:!1},memento:{notify:!0},inline:{reflectToAttribute:!0,type:Boolean,value:!1},input:{notify:!0,observer:"_inputObserver",readOnly:!0},invalid:{notify:!0,observer:"_invalidObserver",readOnly:!0,reflectToAttribute:!0,type:Boolean,value:!1},invalidMessage:{notify:!0,readOnly:!0,type:String,value:null},label:{reflectToAttribute:!0,type:String,value:null},model:{notify:!0,observer:"_modelObserver"},modified:{computed:"_computeModified(memento, model)",notify:!0,reflectToAttribute:!0,type:Boolean,value:!1},name:{reflectToAttribute:!0,type:String,value:""},path:{type:String},primitive:{computed:"_computePrimitive(type)",notify:!0,observer:"_primitiveObserver",type:String,value:"string"},type:{reflectToAttribute:!0,type:String,value:"text"},value:{notify:!0,observer:"_valueObserver",type:String}},primitives:["boolean","number","string"],_computeModified:function(e,t){return e!==t},_computePrimitive:function(e){return"checkbox"===e||"radio"===e?"boolean":"number"===e||"range"===e?"number":"string"},_checkedObserver:function(){var e=this;"boolean"===e.primitive&&(e.model=e._toModel(e.checked),e.input&&e._commitTo(),e.input&&e.validate(),e.fire("xp-input-change",{firer:e,name:e.name,model:e.model}))},_disabledObserver:function(){this.isAttached&&XP.setAttribute(this.findLabel(),"disabled",this.disabled)},_focusedObserver:function(){this.isAttached&&XP.setAttribute(this.findLabel(),"focused",this.focused)},_formObserver:function(e,t){t&&this.unlisten(t,"reset","_resetHandler"),e&&this.listen(e,"reset","_resetHandler")},_hiddenObserver:function(){var e=this;e.async(function(){e.model=e.hidden?null:e.model}),e.isAttached&&XP.setAttribute(e.findLabel(),"hidden",e.hidden)},_inputObserver:function(){var e=this;e.input&&(e.input.adapter=e,XP.isElement(e.input)&&(e.listen(e.input,"blur","_blurHandler"),e.listen(e.input,"change","_changeHandler"),e.listen(e.input,"focus","_focusHandler"),e.listen(e.input,"input","_inputHandler")),Polymer.XPInputBehaviorImp.mutated.apply(e,arguments))},_invalidObserver:function(){this.fire("xp-input-validity",{firer:this,name:this.name,isValid:this.invalid})},_modelObserver:function(){var e=this;XP.isDefined(e.memento)||(e.memento=e.model),e.async(function(){return e.path&&e.domHost&&e.domHost.set(e.path,e.model)}),e["boolean"===e.primitive?"checked":"value"]=e._toValue(e.model)},_primitiveObserver:function(){"boolean"===this.primitive&&this._setEmpty(!1)},_valueObserver:function(){var e=this;"boolean"!==e.primitive&&(e.input&&e.value!==e.sanitize()||(e.model=e._toModel(e.value),e._setEmpty(!e.value),e.input&&e._commitTo(),e.input&&e.validate(),e.fire("xp-input-change",{firer:e,name:e.name,model:e.model})))},attached:function(){var e=this,t=e.findLabel();e._setForm(XP.findParentElement(e,"form")||null),e._setInvalid(!1),XP.setAttribute(t,"disabled",e.disabled),XP.setAttribute(t,"focused",e.focused),XP.setAttribute(t,"hidden",e.hidden),e.scrollIntoViewIfNeeded&&e.listen(window,"resize","_resizeHandler"),e.autoFocus&&requestAnimationFrame(e.focus.bind(e))},created:function(){this.classList.add("input")},detached:function(){var e=this;e._setForm(null),e.scrollIntoViewIfNeeded&&e.unlisten(window,"resize","_resizeHandler")},mutated:function(){var e=this;e._commitIndex!==Polymer.XPInputBehaviorImp._commitIndex&&(e.indexObserver&&e.indexObserver.disconnect(),e.async(e._commitIndex.bind(e,Math.max(e.tabIndex,0))),e.removeAttribute(e.input?"tabindex":""),e.indexObserver=XP.onMutation(e,Polymer.XPInputBehaviorImp.mutated.bind(e),{attributes:!0,attributeFilter:["tabindex"]}))},ready:function(){var e=this;e.mastersMap.form="form",e.async(function(){e.model=XP.isDefined(e.model)?e.model:null}),e.async(e._inject.bind(e)),e.async(e._commitTo.bind(e))},_blurHandler:function(){this._setFocused(!1)},_changeHandler:function(){this._commitFrom()},_clickHandler:function(){this.disabled||this.focus()},_focusHandler:function(){this._setFocused(!this.disabled)},_inputHandler:function(){"string"===this.primitive&&this.sanitize()},_resetHandler:function(){this.async(this.reset.bind(this))},_resizeHandler:function(){var e=this;e.focused&&e.debounce("scroll",function(){requestAnimationFrame(function(){e.scrollIntoViewIfNeeded()})})}},Polymer.XPInputBehavior=[Polymer.XPSlaveBehavior,Polymer.XPInputBehaviorImp];</script>
</head><body></body></html>